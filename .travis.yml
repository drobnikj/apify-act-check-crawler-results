language: node_js
node_js:
  - "8"
before_script:
    - npm install apify-cli -g
script:
  - npm test
  - apify login --token $APIFY_TOKEN
deploy:
  # deploy develop to the staging environment
  - provider: script
    script: apify push --build-tag beta
    on:
      branch: develop
  # deploy master to production
  - provider: script
    script: apify push --build-tag latest
    on:
      branch: master
